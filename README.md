# constraint-llm-agent

[参考1](https://aclanthology.org/2024.lrec-main.444.pdf)  
[参考2](https://aclanthology.org/2024.findings-emnlp.374.pdf)  
[参考3](https://aclanthology.org/2023.ijcnlp-srw.10.pdf)  


③ 制約付き言語→アクション生成 の先行研究
Neural Builder (Jayannavar et al., 2020)

最初期の言語→アクションモデル。各指示を単独で処理し、物理・論理的制約を考慮しない。

Nebula (Chaturvedi et al., EMNLP Findings 2024)

高精度化したとはいえ、出力の安全性・物理制約については後処理レベルにとどまる。

Action-Utterance Model (Ichikawa & Higashinaka, IJCNLP-SRW 2023)

行動か発話かを統合的に学習するが、世界の物理・論理ルールの検証機構は持たない。

Retrieval-Augmented Code Generation / VillagerAgent など

高度な協調や事例参照は行うが、いずれも「衝突」「サポート」「リーチ」といった実際のゲーム制約を自動検証する仕組みは未導入。

これらを踏まえ、③では「CLP によるリアルタイム制約チェック＋自己修正ループ」という新たな枠組みを提案します。



③ 語彙的・論理的整合性を保証する「制約付き」言語→アクション生成
1. 研究目的
Minecraft の物理的・論理的ゲーム制約をプログラム的に定義し、

LLM 出力をリアルタイムで検証・修正することで、

安全かつ一貫性のある自動行動シーケンスを生成する。

2. 提案手法アーキテクチャ
制約論理プログラミング（CLP）エンジン

ブロックの衝突判定、重力、空間的連続性などを Horn clause や Datalog で形式化

LLM プロンプト＋ポストプロセッサ

LLM（例：GPT-4）に「どのブロックをどこに置くか」を出力させる

各アクションを CLP エンジンに逐次投入し、制約違反をチェック

自己修正ループ

違反が起きた場合、その理由（例：「空間衝突」）を解析し

LLM に「この位置では衝突が起きるので、隣接セルに移動して配置して」と再提示

パイプラインの最適化

並列化可能な制約チェック、バッチポストプロセッシングで推論速度を担保

3. データセットと制約定義
制約スイート：

衝突（Block A と Block B が同一座標に重複しない）

サポート（空中に浮かない）

リーチ（エージェントが届く最大距離）

既存の言語→アクションデータセットに制約アノテーションを追加

4. 実験設定
タスク：

複雑な構造物（吊り橋、階段、アーチ）を、LLM が一発で生成

制約違反率と修正回数を計測

比較：

制約なし LLM

事後フィルタ型：シーケンス生成後にまとめてチェック

提案手法：逐次検証＋自己修正

5. 評価指標
Validity Rate：制約を一切違反せずに完遂したケースの割合

Correction Overhead：自己修正の平均ラウンド数

Generation Speed：1 タスクあたりの総推論時間

