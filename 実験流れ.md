実験は大きく以下の５段階で進行します。各ステップで自動化スクリプトを走らせ、最終的に「制約強度⇔行動品質」の関係を定量的に評価します。

---

## 1. タスク＆制約セットアップ

1. **タスク定義**

   * 例：「ゴール地点に到達」「特定ブロックを指定数だけ設置」など
2. **制約テンプレート作成**

   * 禁止アクション（例：水中移動禁止）
   * コスト制約（例：移動１マスにつきコスト１）
   * ペナルティ制約（例：ブロック設置失敗はコスト＋１０）
3. **制約強度パラメータ**

   * Hard 制約／Soft 制約のウェイトを複数設定（例：0.0, 0.5, 1.0, 2.0）

---

## 2. プラン生成フェーズ

1. **プロンプト組み立て**

   * タスク・制約・現在位置・環境情報をテンプレートに埋め込む
2. **LLM による「アクション列」生成**

   * MOVE/PLACE/DIG のシーケンスを出力
3. **静的検証（オプション）**

   * 出力プランが明らかに禁止制約を侵していないかチェック

---

## 3. シミュレーション実行フェーズ

1. **Minecraft 環境起動**（Malmo/Mineflayer）
2. **アクション注入＋実行**

   * １ステップずつ実行
   * 各ステップ後に状態を観測（座標・ブロック状態）
3. **実行時モニタリング**

   * 制約違反検出→即ロールバック or ペナルティ適用
   * 成功／失敗を即座にフラグ付け

---

## 4. メトリクス収集フェーズ

各エピソード（１タスク×１制約強度）ごとに以下を記録：

* 成功率（ゴール到達 or 指定タスク完遂の有無）
* 総ステップ数（実行ステップ数）
* 制約違反回数（ロールバック数）
* 合計コスト（制約コスト＋移動コストなど）

これを制約強度ごとに N 回（例：30 エピソード）繰り返し。

---

## 5. 分析・可視化フェーズ

1. **パラメータ毎の平均値算出**
2. **制約強度 vs 成功率／ステップ数／違反回数 のグラフ化**
3. **トレードオフ分析**

   * 制約を強めるほど成功率↑＆違反↓ だが、ステップ数↑（最適化困難）
4. **統計検定**

   * 有意差検証（例：ANOVA, t-test）

---

### ワークフロー図（イメージ）

```
タスク定義・制約設計
        ↓
プラン生成（LLM + 静的検証）
        ↓
シミュレーション実行（動的監視・ロールバック）
        ↓
メトリクス収集（成功率・違反回数・コスト）
        ↓
可視化・統計分析（制約強度との相関評価）
```

以上の流れを自動化パイプライン化することで、多数の制約設定を高速に評価し、制約指向プランニングの有効性を定量的に示します。
